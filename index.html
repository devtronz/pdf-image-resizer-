<!DOCTYPE html>
<html lang="en">
<head>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#4f46e5">

  <meta charset="UTF-8">
  <title>Photo to PDF</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

<div class="card">
  <h1>Photo to PDF</h1>
  <p>Convert images to one PDF. No upload.</p>

  <label class="upload">
    <input type="file" id="images" multiple accept="image/*">
    ðŸ“¸ Click to select photos
  </label>

  <button onclick="makePDF()">Convert to PDF</button>

  <a href="image-resizer.html" class="nav-btn">Image Resizer</a>

  <footer>Runs fully in your browser</footer>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
async function makePDF() {
  const files = document.getElementById("images").files;
  if (!files.length) return alert("Select images");

  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF();

  for (let i = 0; i < files.length; i++) {
    const img = await loadImage(files[i]);
    const w = pdf.internal.pageSize.getWidth();
    const h = (img.height * w) / img.width;

    if (i > 0) pdf.addPage();
    pdf.addImage(img, "JPEG", 0, 0, w, h);
  }

  pdf.save("photos.pdf");
}

function loadImage(file) {
  return new Promise(res => {
    const r = new FileReader();
    r.onload = () => {
      const img = new Image();
      img.onload = () => res(img);
      img.src = r.result;
    };
    r.readAsDataURL(file);
  });
}
</script>


<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}
</script>
</body>
</html>